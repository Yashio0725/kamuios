# サブ従業員
- id: prompts-repo
  category: 5
  category_name: 従業員
  title: 従業員
  content: ""
  markdown_file: static/data/prompts/create-new-page.v2.md
  markdown_files:
    - static/data/prompts/media-assets-guidelines.md
    - static/data/prompts/requirements-docs-agent.md
    - static/data/prompts/hiring-agent.md
  custom_html: |
    <style>
      .prompt-md { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 18px; }
      .prompt-md pre, .prompt-md code { background: var(--code-bg); border: 1px solid var(--code-border); }
      /* カード切替UI */
      .prompt-cards-wrap { margin-bottom: 16px; }
      .prompt-viewer { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 18px; }
      .card-grid .card.active { border-color: var(--link); box-shadow: 0 0 0 1px color-mix(in srgb, var(--link) 30%, transparent); }
      .card .card-desc { color: var(--text-weak); font-size: .9rem; margin-top: 4px; }
      /* ダークテーマで読めるよう強制カラー */
      .prompt-cards-wrap .card { background: var(--card); color: var(--text); border: 1px solid var(--border); }
      .prompt-cards-wrap .card-title { color: var(--text); font-weight: 800; }
      .prompt-cards-wrap .card:hover { border-color: var(--link); }
      .prompt-cards-wrap .card-img, .prompt-cards-wrap .card-video { width: 100%; height: auto; display: block; margin-top: 8px; border-radius: 8px; background: var(--media-bg); border: 1px solid var(--border); }
      .prompt-cards-wrap .card-name { position: absolute; right: 10px; bottom: 10px; padding: 4px 8px; border-radius: 999px; font-size: 12px; font-weight: 700; background: rgba(17, 24, 39, .7); color: #e5e7eb; border: 1px solid rgba(148, 163, 184, .4); }
      .prompt-cards-wrap .card { position: relative; }
    </style>
    <div class="prompt-cards-wrap">
      <style>
        .team-dash { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); gap: 12px; margin-bottom: 14px; }
        .task-card { background: var(--card); border:1px solid var(--border); border-radius:12px; padding:12px; }
        .task-card h4 { margin: 0 0 8px; font-size: 0.98rem; }
        .task { display:flex; align-items:center; gap:8px; padding:6px 8px; border-radius:8px; margin:4px 0; background: var(--sidebar-bg); border: 1px solid var(--border); }
        .task .status { width:18px; height:18px; display:inline-flex; align-items:center; justify-content:center; border-radius:4px; border:1px solid var(--border); font-size:12px; }
        .task.done .status { background:#10b98133; border-color:#10b98166; color:#10b981; }
        .task.doing .status { background:#f59e0b22; border-color:#f59e0b66; color:#f59e0b; }
        .task.todo .status { background:transparent; color:var(--text-weak); }
        .task .name { flex:1; color:var(--text); }
        .task small { color:var(--text-weak); }
      </style>
    <div class="card-grid" id="promptCardGrid"></div>
      <div class="team-dash" id="teamDash"></div>
    </div>
    <div class="prompt-viewer" id="promptDocViewer"></div>
    <script>
      (function(){
        const sec = document.getElementById('prompts-repo');
        const grid = sec.querySelector('#promptCardGrid');
        const teamDash = sec.querySelector('#teamDash');
        const viewer = sec.querySelector('#promptDocViewer');
        if (!grid || !viewer) return;
        // 簡易チームダッシュボード（カードの下に表示）
        if (teamDash) {
          const team = [
            { name: 'タクミ', role: 'テンプレ/JS', tasks: [
              { title: 'TOC 折りたたみ実装', status: 'done' },
              { title: 'カード4枚化', status: 'done' },
              { title: '直リンク時の初期化', status: 'doing' }
            ]},
            { name: 'ミナ', role: 'アセット/動画', tasks: [
              { title: 'エージェント動画差替', status: 'done' },
              { title: 'SNSカード素材', status: 'todo' },
              { title: 'OG画像更新', status: 'todo' }
            ]},
            { name: 'サラ', role: '採用担当', tasks: [
              { title: '求人票テンプレ整備', status: 'doing' },
              { title: '面談スケジュール運用', status: 'todo' },
              { title: '候補者DB/同意管理', status: 'todo' }
            ]},
            { name: 'エミリー', role: '要件定義執筆', tasks: [
              { title: 'ネコカフェ要件書 章立て', status: 'done' },
              { title: 'KAMUI OS NPM 要件書 追記', status: 'doing' },
              { title: 'SNSダッシュボード KPI表', status: 'todo' }
            ]}
          ];
          const icon = (s)=> s==='done'?'✅':(s==='doing'?'🟧':'⬜️');
          team.forEach(member => {
            const box = document.createElement('div');
            box.className = 'task-card';
            box.innerHTML = `<h4>${member.name} <small style="color:var(--text-weak);">${member.role}</small></h4>`;
            member.tasks.forEach(t => {
              const row = document.createElement('div');
              row.className = `task ${t.status}`;
              row.innerHTML = `<span class="status">${icon(t.status)}</span><div class="name">${t.title}</div>`;
              box.appendChild(row);
            });
            teamDash.appendChild(box);
          });
        }
        const docs = Array.from(sec.querySelectorAll('.markdown-body'));
        if (!docs.length) return;
        let items = docs.map((el, i) => {
          const title = (el.querySelector('h1,h2')?.textContent || `ドキュメント ${i+1}`).trim();
          const id = `prompt-doc-${i}`;
          const path = el.getAttribute('data-path') || '';
          el.dataset.docId = id;
          return { id, title, path, el };
        });
        // 並び順: 拓海, ミナ, 採用担当, エミリー（エミリーを右端に）
        const order = ['create-new-page.v2.md','media-assets-guidelines.md','hiring-agent.md','requirements-docs-agent.md'];
        items.sort((a,b)=>{
          const aIdx = order.findIndex(k => (a.path||'').endsWith(k));
          const bIdx = order.findIndex(k => (b.path||'').endsWith(k));
          return (aIdx<0?99:aIdx) - (bIdx<0?99:bIdx);
        });
        // タイトル補正（h1/h2 が見つからない場合の保険）
        const nameMap = new Map([
          ['create-new-page.v2.md','新規ページ追加（外部YAML基準）'],
          ['media-assets-guidelines.md','画像/動画アセットの置き場所と参照ルール'],
          ['hiring-agent.md','採用担当（Recruiter）'],
          ['requirements-docs-agent.md','要件定義執筆担当（KAMUI OS / KAMUI CODE）']
        ]);
        items.forEach(it => {
          if (!it.title || /^ドキュメント\s*\d+/.test(it.title)) {
            const key = (it.path||'').split('/').pop();
            const alt = nameMap.get(key);
            if (alt) it.title = alt;
          }
        });
        // ビューア初期化
        function showDoc(id){
          viewer.innerHTML = '';
          items.forEach(it => {
            const card = grid.querySelector(`[data-id="${it.id}"]`);
            card?.classList.toggle('active', it.id === id);
          });
          const target = items.find(it => it.id === id);
          if (target){ viewer.appendChild(target.el); target.el.style.display = 'block'; }
        }
        // カード生成
        items.forEach((it, idx) => {
          const card = document.createElement('div');
          card.className = 'card';
          card.setAttribute('data-id', it.id);
          let img = '';
          if (/media-assets-guidelines\.md$/.test(it.path||'')) {
            img = '<video class="card-video" src="/images/agent-female-hero-video.mp4" autoplay loop muted playsinline></video>'+
                  '<span class="card-name">ミナ</span>';
          }
          if (/create-new-page\.v2\.md$/.test(it.path||'')) {
            img = '<video class="card-video" src="/images/agent-male-hero-video.mp4" autoplay loop muted playsinline></video>'+
                  '<span class="card-name">拓海</span>';
          }
          if (/requirements-docs-agent\.md$/.test(it.path||'')) {
            img = '<video class="card-video" src="/videos/agent_card_video_square.mp4" autoplay loop muted playsinline></video>'+
                  '<span class="card-name">エミリー</span>';
          }
          if (/hiring-agent\.md$/.test(it.path||'')) {
            img = '<video class="card-video" src="/videos/recruiter_card_video_square.mp4" poster="/images/agent_card.png" autoplay loop muted playsinline></video>'+
                  '<span class="card-name">サラ</span>';
          }
          card.innerHTML = `<div class="card-title">${it.title}</div>${img}`;
          card.addEventListener('click', () => showDoc(it.id));
          // 右クリックで相対パスをクリップボードへコピー
          card.addEventListener('contextmenu', async (e) => {
            e.preventDefault();
            const p = it.path || '';
            if (!p) return;
            try {
              await navigator.clipboard.writeText(p);
              const t = card.querySelector('.card-title');
              const org = t.textContent;
              t.textContent = '✅ パスをコピーしました';
              setTimeout(()=>{ t.textContent = org; }, 1200);
            } catch(err) {
              console.error('Copy failed', err);
            }
          });
          grid.appendChild(card);
          // いったん隠しておく（選択時にviewerへ移動）
          it.el.style.display = 'none';
        });
        // 先頭を表示
        showDoc(items[0].id);
      })();
    </script>
